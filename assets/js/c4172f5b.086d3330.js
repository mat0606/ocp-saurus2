"use strict";(self.webpackChunkocp_saurus_2=self.webpackChunkocp_saurus_2||[]).push([[2989],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,k=m["".concat(o,".").concat(d)]||m[d]||u[d]||i;return a?n.createElement(k,l(l({ref:t},c),{},{components:a})):n.createElement(k,l({ref:t},c))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[m]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(6010);const i="tabItem_Ymn6";function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,l),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(7462),r=a(7294),i=a(6010),l=a(2389),s=a(7392),o=a(7094),p=a(2466);const c="tabList__CuJ",m="tabItem_LNqP";function u(e){const{lazy:t,block:a,defaultValue:l,values:u,groupId:d,className:k}=e,g=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),N=u??g.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),h=(0,s.l)(N,((e,t)=>e.value===t.value));if(h.length>0)throw new Error(`Docusaurus error: Duplicate values "${h.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const f=null===l?l:l??g.find((e=>e.props.default))?.props.value??g[0].props.value;if(null!==f&&!N.some((e=>e.value===f)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${f}" but none of its children has the corresponding value. Available values are: ${N.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:v}=(0,o.U)(),[y,C]=(0,r.useState)(f),S=[],{blockElementScrollPositionUntilNextRender:w}=(0,p.o5)();if(null!=d){const e=b[d];null!=e&&e!==y&&N.some((t=>t.value===e))&&C(e)}const x=e=>{const t=e.currentTarget,a=S.indexOf(t),n=N[a].value;n!==y&&(w(t),C(n),null!=d&&v(d,String(n)))},_=e=>{let t=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const a=S.indexOf(e.currentTarget)+1;t=S[a]??S[0];break}case"ArrowLeft":{const a=S.indexOf(e.currentTarget)-1;t=S[a]??S[S.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",c)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},k)},N.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,key:t,ref:e=>S.push(e),onKeyDown:_,onClick:x},l,{className:(0,i.Z)("tabs__item",m,l?.className,{"tabs__item--active":y===t})}),a??t)}))),t?(0,r.cloneElement)(g.filter((e=>e.props.value===y))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==y})))))}function d(e){const t=(0,l.Z)();return r.createElement(u,(0,n.Z)({key:String(t)},e))}},2653:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));a(5488),a(5162);const i={sidebar_position:7,title:"Option 1: Create Files Storage Class Deployment using RedHat OpenShift Console"},l="Option 1: Nutanix Files StorageClass Deployment using RedHat OpenShift Console",s={unversionedId:"ocp_ntnx_hci/ocp_sc_files",id:"ocp_ntnx_hci/ocp_sc_files",title:"Option 1: Create Files Storage Class Deployment using RedHat OpenShift Console",description:"Nutanix CSI with Nutanix Files as a target provides ReadWriteMany (RWM) capabilities meaning many pods can write to to the target storage at the same time.",source:"@site/docs/ocp_ntnx_hci/ocp_sc_files.mdx",sourceDirName:"ocp_ntnx_hci",slug:"/ocp_ntnx_hci/ocp_sc_files",permalink:"/ocp-saurus2/ocp_ntnx_hci/ocp_sc_files",draft:!1,editUrl:"https://github.com/mat0606/ocp-saurus2/edit/main/docs/ocp_ntnx_hci/ocp_sc_files.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Option 1: Create Files Storage Class Deployment using RedHat OpenShift Console"},sidebar:"tutorialSidebar",previous:{title:"Create Persistent Volume Claim for Nutanix Volume",permalink:"/ocp-saurus2/ocp_ntnx_hci/ocp_volume_pvc"},next:{title:"Option 2: Create Files Storage Class Deployment using Command Line",permalink:"/ocp-saurus2/ocp_ntnx_hci/ocp_sc_files2"}},o={},p=[{value:"Create a File Share in Nutanix Files",id:"create-a-file-share-in-nutanix-files",level:2},{value:"Create Storage Class for Nutanix Files",id:"create-storage-class-for-nutanix-files",level:2}],c={toc:p};function m(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"option-1-nutanix-files-storageclass-deployment-using-redhat-openshift-console"},"Option 1: Nutanix Files StorageClass Deployment using RedHat OpenShift Console"),(0,r.kt)("p",null,"Nutanix CSI with Nutanix Files as a target provides ReadWriteMany (RWM) capabilities meaning many pods can write to to the target storage at the same time."),(0,r.kt)("h2",{id:"create-a-file-share-in-nutanix-files"},"Create a File Share in Nutanix Files"),(0,r.kt)("p",null,"Let's create a new share to provide it as a storage location for our storage class based on Nutanix Files."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In Prism Central, click on the hamburger menue.  Click on Files"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(4698).Z,width:"303",height:"579"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on the ",(0,r.kt)("strong",{parentName:"p"},"BootcampFS")," files server.  It opens a new tab."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(7070).Z,width:"995",height:"189"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Shares")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(3276).Z,width:"993",height:"440"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Create a New Share")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(6683).Z,width:"987",height:"148"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a new ",(0,r.kt)("inlineCode",{parentName:"p"},"NFSv4")," share by filling in the following details"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Name")," - ocp",(0,r.kt)("strong",{parentName:"p"},"initial"),"_nfs (E.g. ocp1_nfs, ocp2_nfs, ocp3_nfs)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Description")," - created for Files CSI on OCP ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Share Path")," - leave blank")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Max Size")," - leave blank GiB ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Primary Protocol Access")," - NFS"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(5255).Z,width:"693",height:"754"})))),(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Although Nutanix Files supports NFSv3 and NFSv4, only NFSv4 works with Storage Class. "),(0,r.kt)("p",{parentName:"admonition"},"Make sure your Files share that you will be using with Storage Class is NFSv4. "),(0,r.kt)("p",{parentName:"admonition"},"This issue may be resolved in future via software update to Nutanix CSI. "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Next"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fill in the following details:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"General"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Enable Compression")," - checked"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Authentication")," - System"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Default Access")," - Read-Write "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Squash")," - None "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Anonymous UID")," - leave blank"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Anonymous GID")," - leave blank")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(5439).Z,width:"717",height:"753"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Next"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Confirm your setting and click on ",(0,r.kt)("strong",{parentName:"p"},"Create")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(2390).Z,width:"695",height:"675"}),"\n",(0,r.kt)("img",{src:a(7734).Z,width:"690",height:"360"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Wait for a few seconds."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(5624).Z,width:"1572",height:"277"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The file share was created successfully"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(8655).Z,width:"1552",height:"283"})))),(0,r.kt)("h2",{id:"create-storage-class-for-nutanix-files"},"Create Storage Class for Nutanix Files"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Login to RedHat OpenShift console.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Storage"),".  Click on ",(0,r.kt)("strong",{parentName:"p"},"StorageClasses"),".  Click on ",(0,r.kt)("strong",{parentName:"p"},"Create StorageClass")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(2778).Z,width:"986",height:"241"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fill in the following:"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(3549).Z,width:"818",height:"693"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fill in the following parameters:"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(648).Z,width:"709",height:"692"})),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Parameters - ",(0,r.kt)("strong",{parentName:"li"},"Values"),"     "),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/provisioner-secret-name - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-secret")," "),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/provisioner-secret-namespace - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-system")," "),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/node-publish-secret-name  - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-secret")),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/node-publish-secret-namespace - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-system")),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/controller-expand-secret-name - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-secret")),(0,r.kt)("li",{parentName:"ul"},"csi.storage.k8s.io/controller-expand-secret-namespace - ",(0,r.kt)("strong",{parentName:"li"},"ntnx-system")),(0,r.kt)("li",{parentName:"ul"},"nfsServerName - ",(0,r.kt)("strong",{parentName:"li"},"BootcampFS")),(0,r.kt)("li",{parentName:"ul"},"dynamicProv -  ",(0,r.kt)("strong",{parentName:"li"},"ENABLED")),(0,r.kt)("li",{parentName:"ul"},"storageType - ",(0,r.kt)("strong",{parentName:"li"},"NutanixFiles")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Create"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The storage class for Nutanix Files was created successfully."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(7520).Z,width:"965",height:"708"})))))}m.isMDXComponent=!0},2778:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-SC-1-d70d169baad7c9197452d6aeb627d528.png"},3549:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-SC-2-3a93f5e493e9bde8be56dd59a225139c.png"},648:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-SC-3-ecedde1776452702d1221fea4ad66360.png"},7520:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-SC-4-be81c84387919889ef8ebd2b2b6ada12.png"},4698:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-1-43e63f511e25de7cb8ece5a617e03579.png"},8655:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-10-7d9264ee8a0d63ce112257e8e1c93c29.png"},7070:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-2-8d3743d74e98cfc6d22bc4cb89aec535.png"},3276:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-3-e0ff63a4e4d5da138e8497f64ec7a118.png"},6683:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-4-3ef0b92fe351214b51f445634cf69441.png"},5255:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-5-51e97e117ba7df558082110bfe32dfac.png"},5439:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-6-664ca5c29c8db98da3627284c0bb4649.png"},2390:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-7-0ad45d0e942864006d4e108e247b1e2b.png"},7734:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-8-4be721813efa240257b5500d21ea9c43.png"},5624:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/File-Share-9-ae08bf8bc811dbaeefb6db5b315fcdcd.png"}}]);