"use strict";(self.webpackChunkocp_saurus_2=self.webpackChunkocp_saurus_2||[]).push([[5962],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return a?n.createElement(f,i(i({ref:t},c),{},{components:a})):n.createElement(f,i({ref:t},c))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(6010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(7462),r=a(7294),o=a(6010),i=a(2389),l=a(7392),s=a(7094),p=a(2466);const c="tabList__CuJ",u="tabItem_LNqP";function d(e){const{lazy:t,block:a,defaultValue:i,values:d,groupId:m,className:f}=e,h=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=d??h.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),k=(0,l.l)(b,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const g=null===i?i:i??h.find((e=>e.props.default))?.props.value??h[0].props.value;if(null!==g&&!b.some((e=>e.value===g)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${g}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:N}=(0,s.U)(),[O,y]=(0,r.useState)(g),w=[],{blockElementScrollPositionUntilNextRender:D}=(0,p.o5)();if(null!=m){const e=v[m];null!=e&&e!==O&&b.some((t=>t.value===e))&&y(e)}const P=e=>{const t=e.currentTarget,a=w.indexOf(t),n=b[a].value;n!==O&&(D(t),y(n),null!=m&&N(m,String(n)))},S=e=>{let t=null;switch(e.key){case"Enter":P(e);break;case"ArrowRight":{const a=w.indexOf(e.currentTarget)+1;t=w[a]??w[0];break}case"ArrowLeft":{const a=w.indexOf(e.currentTarget)-1;t=w[a]??w[w.length-1];break}}t?.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",c)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},f)},b.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:O===t?0:-1,"aria-selected":O===t,key:t,ref:e=>w.push(e),onKeyDown:S,onClick:P},i,{className:(0,o.Z)("tabs__item",u,i?.className,{"tabs__item--active":O===t})}),a??t)}))),t?(0,r.cloneElement)(h.filter((e=>e.props.value===O))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==O})))))}function m(e){const t=(0,i.Z)();return r.createElement(d,(0,n.Z)({key:String(t)},e))}},9459:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));a(5488),a(5162);const o={sidebar_position:7,title:"Install OADP & ODF"},i="OpenShift API for Data Protection (OADP) & OpenShift Data Protection (ODF)",l={unversionedId:"ocp_object/ocp_odf",id:"ocp_object/ocp_odf",title:"Install OADP & ODF",description:"OADP enables backup, restore, and disaster recovery of applications on an OpenShift cluster. Data that can be protected with OADP include Kubernetes resource objects, persistent volumes, and internal images. The OpenShift API for Data Protection (OADP) is designed to protect Application Workloads on a single OpenShift cluster.",source:"@site/docs/ocp_object/ocp_odf.mdx",sourceDirName:"ocp_object",slug:"/ocp_object/ocp_odf",permalink:"/ocp-saurus2/ocp_object/ocp_odf",draft:!1,editUrl:"https://github.com/mat0606/ocp-saurus2/edit/main/docs/ocp_object/ocp_odf.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Install OADP & ODF"},sidebar:"tutorialSidebar",previous:{title:"Modify OpenShift Worker Node VM Sizing",permalink:"/ocp-saurus2/ocp_object/ocp_worker_nodes"},next:{title:"Nutanix Objects as Backup Destination",permalink:"/ocp-saurus2/optional_labs/objects_prep"}},s={},p=[{value:"Pre-requisites/Requirements",id:"pre-requisitesrequirements",level:2},{value:"Installing OpenShift Data Foundation Operator",id:"installing-openshift-data-foundation-operator",level:2}],c={toc:p};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"openshift-api-for-data-protection-oadp--openshift-data-protection-odf"},"OpenShift API for Data Protection (OADP) & OpenShift Data Protection (ODF)"),(0,r.kt)("p",null,"OADP enables backup, restore, and disaster recovery of applications on an OpenShift cluster. Data that can be protected with OADP include Kubernetes resource objects, persistent volumes, and internal images. The OpenShift API for Data Protection (OADP) is designed to protect Application Workloads on a single OpenShift cluster."),(0,r.kt)("p",null,"Red Hat OpenShift\xae Data Foundation is software-defined storage for containers. Engineered as the data and storage services platform for Red Hat OpenShift, Red Hat OpenShift Data Foundation helps teams develop and deploy applications quickly and efficiently across clouds"),(0,r.kt)("p",null,"OADP backs up and restores Kubernetes resources and internal images at the granularity of a namespace by using Velero. Nutanix CSI offers snapshot\ncapabilities, which can be leveraged by OADP to back up and restore persistent volumes (PVs)."),(0,r.kt)("h2",{id:"pre-requisitesrequirements"},"Pre-requisites/Requirements"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The RedHat OpenShift 4.11 cluster was created using IPI")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Terminal environment must have the following commands:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"oc (Available in both UPI & IPI installation)"),(0,r.kt)("li",{parentName:"ul"},"git "),(0,r.kt)("li",{parentName:"ul"},"velero"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set alias to use command from cluster (preferred)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"alias velero='oc -n openshift-adp exec deployment/velero -c velero -it -- ./velero'"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download velero from Github Release\nAlternatively enter prepared environment in your terminal with docker run -it ghcr.io/kaovilai/oadp-cli:v1.0.1 bash\nsource can be found at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kaovilai/oadp-cli"},"https://github.com/kaovilai/oadp-cli"),"\nAuthenticate as Cluster Admin inside your environment of an OpenShift 4.9 Cluster.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Your cluster meets the minimum requirement for ODF in Internal Mode deployment"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"3 worker nodes, each with at least:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"8 logical CPU"),(0,r.kt)("li",{parentName:"ul"},"24 GiB memory"),(0,r.kt)("li",{parentName:"ul"},"1+ storage devices")))))),(0,r.kt)("h2",{id:"installing-openshift-data-foundation-operator"},"Installing OpenShift Data Foundation Operator"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open the RedHat OpenShift console in the browser.  Put in the following:"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://console-openshift-console.**ocp"},"https://console-openshift-console.**ocp")," subdomain",(0,r.kt)("strong",{parentName:"p"},"."),"base domain>**."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Eg ",(0,r.kt)("a",{parentName:"strong",href:"https://console-openshift-console.ocp1ipi.ntnxlab.local"},"https://console-openshift-console.ocp1ipi.ntnxlab.local")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to ",(0,r.kt)("strong",{parentName:"p"},"Operators"),".  Navigate to ",(0,r.kt)("strong",{parentName:"p"},"OperatorHub"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Filter by ",(0,r.kt)("strong",{parentName:"p"},"openshift data"),".  Click on ",(0,r.kt)("strong",{parentName:"p"},"OpenShift Data Foundation")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(5630).Z,width:"894",height:"490"})," ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Install")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(3254).Z,width:"903",height:"515"})," ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Install")," at the bottom of the screen."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(3926).Z,width:"1434",height:"601"}),"\n",(0,r.kt)("img",{src:a(9222).Z,width:"1436",height:"625"})," ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Wait for a few minutes"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(7142).Z,width:"904",height:"362"})," ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Create Storage System")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(4191).Z,width:"882",height:"578"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Fill in the following default values.  Click on ",(0,r.kt)("strong",{parentName:"p"},"Create")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{src:a(6393).Z,width:"1436",height:"610"}),"\n",(0,r.kt)("img",{src:a(3548).Z,width:"899",height:"244"})))))}u.isMDXComponent=!0},5630:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-1-58849194333b2a9eb7cf212e8e307fde.png"},3254:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-2-41e214be900af449cbfc53d17c150fc8.png"},3926:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-3-4ef20f976f6b9e45c0f91d86e25e1164.png"},9222:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-4-8962c2998f55c68d2cd03605769cf01d.png"},7142:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-5-8fc0d86282023a0ffe3e9bcfb60f0175.png"},4191:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-6-e3faaf24000fd295899aa4ff5bcc72d0.png"},6393:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-7-9af03c0f22b9792275afddd023a21cfa.png"},3548:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/odf-8-1400f0b2bd2267c88719e08607c17ebd.png"}}]);